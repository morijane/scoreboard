<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Дисплей баллов</title>
<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  background: black;
  color: cyan;
  font-family: 'Orbitron', sans-serif;
  overflow: hidden;
}
.player {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 80px;
  border-right: 1px solid #222;
}
.player:last-child {
  border-right: none;
}
.team {
  font-size: 40px;
}
#container {
  display: flex;
  width: 100%;
  height: 100%;
}
#winnerOverlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:red;
  color:white;
  font-size:180px;
  font-weight:bold;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:100;
  display:none;
  text-align:center;
}
</style>
</head>
<body>
<div id="container">
  <div class="player">
    <div id="name1">Игрок 1</div>
    <div class="team">БЕЛЫЙ</div>
    <div id="points1">0</div>
  </div>
  <div class="player">
    <div id="name2">Игрок 2</div>
    <div class="team">КРАСНЫЙ</div>
    <div id="points2">0</div>
  </div>
</div>

<div id="winnerOverlay"></div>

<script>
const winnerOverlay = document.getElementById('winnerOverlay');

async function refreshDisplay(){
    try {
        const res = await fetch('/data');
        const data = await res.json();

        // Переключение на колесо
        if(data.page === "wheel") {
            window.location.href = '/wheel.html';
            return;
        }

        // Обновление имён и баллов
        document.getElementById('name1').textContent = data.name1;
        document.getElementById('points1').textContent = data.points1;
        document.getElementById('name2').textContent = data.name2;
        document.getElementById('points2').textContent = data.points2;

        // Показ победителя через overlay
        if(data.showWinner){
            winnerOverlay.textContent = data.winnerName + " WIN";
            winnerOverlay.style.display = "flex";
        } else {
            winnerOverlay.style.display = "none";
        }

    } catch(e){ console.error(e); }
}

// Обновление каждые 500мс
setInterval(refreshDisplay, 500);
</script>
</body>
</html>
